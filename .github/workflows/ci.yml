name: ğŸµ Audio Sorter CI

on:
  push:
    branches: [ main, develop, ci ]
  pull_request:
    branches: [ main, develop ]

jobs:
  build-and-test:
    name: ğŸ”§ Build & Test
    runs-on: macos-latest
    
    steps:
    - name: ğŸ“¥ Checkout Code
      uses: actions/checkout@v4
      
    - name: ğŸ”¨ Build Swift Package
      run: |
        cd swift-tagger
        echo "Building Swift package..."
        swift build
        echo "âœ… Swift build successful"
        
    - name: ğŸ§ª Run Swift Tests
      run: |
        cd swift-tagger
        echo "Running Swift tests..."
        swift test
        echo "âœ… Swift tests passed"
        
    - name: ğŸ Test Python Syntax
      run: |
        echo "Testing Python script syntax..."
        python3 -m py_compile swift-tagger/update-mp3-tags.py
        echo "âœ… Python syntax is valid"
        
    - name: ğŸš Test Shell Script Syntax
      run: |
        echo "Testing shell script syntax..."
        bash -n create-distribution.sh
        bash -n swift-tagger/create-gui-app-bundle.sh
        echo "âœ… Shell scripts syntax is valid"
 